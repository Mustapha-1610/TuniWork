<form [formGroup]="publicJobOfferForm" (ngSubmit)="onSubmit()">
  <!-- Title -->
  <div class="form-group">
    <label for="Title">Title:</label>
    <input
      type="text"
      id="Title"
      formControlName="Title"
      class="form-control"
      required
    />
  </div>

  <!-- Description -->
  <div class="form-group">
    <label for="Description">Description:</label>
    <textarea
      id="Description"
      formControlName="Description"
      class="form-control"
      rows="3"
      required
    ></textarea>
  </div>
  <div>
    <label for="deadline" class="block text-sm font-medium text-gray-700"
      >Deadline</label
    >
    <input
      type="datetime-local"
      class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
      id="deadline"
      formControlName="DeadLine"
      required
    />
  </div>
  <br />
  <div>
    <label for="deadline" class="block text-sm font-medium text-gray-700"
      >Start Time</label
    >
    <input
      type="datetime-local"
      class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
      id="deadline"
      formControlName="StartTime"
      required
    />
  </div>
  <div class="form-group">
    <label for="CompanySignature">Signature:</label>
    <img
      id="CompanySignature"
      [src]="publicJobOfferForm.get('CompanySignature')?.value"
      alt="Company Signature"
    />
  </div>

  <!-- Note -->
  <div class="form-group">
    <label for="Note">Note:</label>
    <textarea
      id="Note"
      formControlName="Note"
      class="form-control"
      rows="2"
    ></textarea>
  </div>

  <!-- PayPerTask bch narja3 LEL PART HEDHI 5aterha table w dra chnawa -->
  <div formGroupName="PayPerTask">
    <div class="form-group">
      <label for="ExperienceLevel">Experience Level:</label>
      <input
        type="text"
        id="ExperienceLevel"
        formControlName="ExperienceLevel"
        class="form-control"
      />
    </div>
    <div class="form-group">
      <label for="FixedPrice">Fixed Price:</label>
      <input
        type="text"
        id="FixedPrice"
        formControlName="FixedPrice"
        class="form-control"
      />
    </div>
  </div>

  <!-- CompanyName -->
  <div class="form-group" style="display: none">
    <label for="CompanyName">Company Name:</label>
    <input
      type="text"
      id="CompanyName"
      formControlName="CompanyName"
      class="form-control"
      required
    />
  </div>

  <!-- CompanyId bch nrodou invis w bch njibou mel local host-->
  <div class="form-group" style="display: none">
    <label for="CompanyId">Company ID:</label>
    <input
      type="text"
      id="CompanyId"
      formControlName="CompanyId"
      class="form-control"
      required
    />
  </div>
  <form [formGroup]="form">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="mb-4 flex-item">
        <label class="block text-gray-700 text-sm font-bold mb-2" for="city">
          City
        </label>
        <ng-multiselect-dropdown
          id="cities"
          formControlName="cities"
          [placeholder]="'Select City'"
          [settings]="citiesDrowdownSettings"
          [data]="CitiesList"
          (onSelect)="onCitySelect($event)"
          (onDeSelect)="onCityDeselect($event)"
          class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
        ></ng-multiselect-dropdown>
      </div>
      <div class="mb-4 flex-item">
        <label
          class="block text-gray-700 text-sm font-bold mb-2"
          for="speciality"
        >
          Municipality
        </label>
        <ng-multiselect-dropdown
          id="municipality"
          formControlName="municipality"
          [placeholder]="'Select Municipality'"
          [settings]="MunicipalityDropdownSettings"
          [data]="MunicipalityList"
          (onSelect)="onSpecialitySelect($event)"
          (onDeSelect)="onSpecialityDeselect($event)"
          class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
        ></ng-multiselect-dropdown>
      </div>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="mb-4 flex-item">
        <label
          class="block text-gray-700 text-sm font-bold mb-2"
          for="workTitle"
        >
          Work Title
        </label>
        <ng-multiselect-dropdown
          id="workTitles"
          formControlName="workTitles"
          [placeholder]="'Select Work Title'"
          [settings]="WorkTitleSettings"
          [data]="WorkTitleList"
          (onSelect)="onItemSelect($event)"
          (onDeSelect)="onItemDeselect($event)"
          class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
        ></ng-multiselect-dropdown>
      </div>

      <!-- Work Speciality Dropdown -->
      <div class="mb-4 flex-item">
        <label
          class="block text-gray-700 text-sm font-bold mb-2"
          for="speciality"
        >
          Work Speciality
        </label>
        <ng-multiselect-dropdown
          id="specialities"
          formControlName="specialities"
          [placeholder]="'Select Work Speciality'"
          [settings]="SpecialitySettings"
          [data]="SpecialityList"
          (onSelect)="onSpecialitySelect($event)"
          (onDeSelect)="onSpecialityDeselect($event)"
          class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
        ></ng-multiselect-dropdown>
      </div>
    </div>
    <!-- Task List Input -->
    <div>
      <form
        [formGroup]="tasksForm"
        (ngSubmit)="addToTaskList()"
        class="flex items-center space-x-3"
      >
        <input
          id="Task"
          type="text"
          formControlName="Task"
          placeholder="Enter a task"
          class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
        />
        <button
          type="submit"
          class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"
        >
          Add
        </button>
      </form>
    </div>

    <!-- Task List Display -->
    <div class="space-y-2">
      <div class="flex items-center space-x-2" *ngFor="let items of taskTable">
        <span class="flex-1">{{ items }}</span>
        <button
          type="button"
          (click)="deleteItem(items)"
          class="text-gray-400 hover:text-gray-600"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"
            />
          </svg>
        </button>
      </div>
    </div>
  </form>

  <!-- Submit Button -->
  <button type="submit" class="btn btn-primary">Create Public Job Offer</button>
</form>
